import{d as D,b as v,u as F,e as B,aa as N,c as f,a as n,i as e,g as i,U as P,j as t,V as u,k as S,h as g,F as T,o as p,f as m,m as q,p as E}from"./index-c8EmFYNS.js";import{g as I,d as Q}from"./discounts-service-No3SBHnG.js";import{u as L}from"./useQuery-diit9zOu.js";import{d as U}from"./index-SJTx5oYY.js";import{V as j,L as K}from"./VDataTableServer-v46vmEDx.js";import{c as M,V as $,a as z,b as O}from"./VDialog-wyLMp0R1.js";import{V as A}from"./VSpacer-LceoUdPZ.js";import"./queryString-AL1HqB06.js";import"./filter-7s9Z3Opi.js";import"./VAvatar-_g8D_ewF.js";import"./createSimpleFunctional-gvfQdlSX.js";import"./VSelectionControl-UDC2vv3o.js";const G=n("h2",{class:"text-2xl font-semibold"}," التخفيضات ",-1),H={class:"flex justify-between mt-8"},J={class:"w-72"},R={key:1},W={class:"shadow-lg rounded-lg mt-4 border border-gray-200"},X={class:"flex gap-2"},ce=D({__name:"DiscountsList",setup(Y){const c=v(""),o=v({page:1,limit:10,productName:void 0,category_id:void 0}),r=L({queryKey:["discounts",o],queryFn:()=>I(o.value)}),_=[{title:"الكود",value:"code",width:"300px",sortable:!1},{title:"نوع التخفيض",value:"discount_type",width:"300px",sortable:!1},{title:"نسبة التخفيض",value:"amount",width:"300px",sortable:!1},{title:"تاريخ بداية التخفيض",value:"start_date",width:"300px",sortable:!1},{title:"تاريخ إنتهاء الصلاحية",value:"end_date",width:"300px",sortable:!1},{title:"الإجرائات",key:"actions",width:"300px",sortable:!1}],h=({page:a,limit:s})=>{o.value={...o.value,page:a??1,limit:s??10}},y=U(()=>{o.value.productName=c.value},300),V=F(),b=B({mutationFn:Q,onSuccess:()=>{V.invalidateQueries({queryKey:["discounts"]})},onError:a=>{console.log(a)}}),x=a=>{b.mutate(a)},C=a=>`حذف التخفيض ${a}# ?`;return(a,s)=>{const k=N("DeleteIcon");return p(),f(T,null,[G,n("div",H,[n("div",J,[e(P,{modelValue:c.value,"onUpdate:modelValue":s[0]||(s[0]=l=>c.value=l),label:"البحث",variant:"outlined",color:"primary",clearable:"",placeholder:"البحث",density:"compact",onInput:i(y)},null,8,["modelValue","onInput"])]),e(u,{"append-icon":i(q),to:{name:"add-discount"},color:"primary",variant:"elevated"},{default:t(()=>[m(" إضافة تخفيض ")]),_:1},8,["append-icon"])]),i(r).isPending.value?(p(),S(K,{key:0})):g("",!0),i(r).data.value?(p(),f("div",R,[n("div",W,[e(j,{sticky:"","items-per-page":o.value.limit,page:o.value.page,headers:_,"items-length":i(r).data.value.length,items:i(r).data.value,"onUpdate:options":s[1]||(s[1]=l=>h({page:l.page,limit:l.itemsPerPage}))},{"item.actions":t(({item:l})=>[n("div",X,[e(M,{width:"500"},{activator:t(({props:d})=>[e(u,E(d,{size:"small",variant:"elevated",color:"#004C6B",type:"submit"}),{prepend:t(()=>[e(k,{fill:"fill-white"})]),default:t(()=>[m(" حذف ")]),_:2},1040)]),default:t(({isActive:d})=>[e($,{title:C(l.code),rounded:"lg",color:"#EFE9F5",style:{"padding-block":"1.75rem !important"}},{default:t(()=>[e(z,null,{default:t(()=>[m(" سيتم حذف هذه التخفيض بشكل نهائي . ")]),_:1}),e(O,null,{default:t(()=>[e(A),e(u,{text:"لا",onClick:w=>d.value=!1},null,8,["onClick"]),e(u,{text:"نعم",onClick:w=>{d.value=!1,x(l.id)}},null,8,["onClick"])]),_:2},1024)]),_:2},1032,["title"])]),_:2},1024)])]),_:2},1032,["items-per-page","page","items-length","items"])])])):g("",!0)],64)}}});export{ce as default};
