import{d as J,b as y,w as K,o as T,c as F,a as d,i as a,h as D,z as ee,C as ae,A as te,H as $,a0 as le,a1 as se,G as B,E as oe,B as ne,J as ie,K as N,p as L,F as re,a2 as de,a3 as ue,a4 as ce,a5 as me,N as ve,O as fe,P as ge,a6 as pe,a7 as z,a8 as R,R as he,S as P,g as r,T as U,U as ye,t as E,j as _e,V as be,W as Ve,f as we}from"./index-c8EmFYNS.js";import{U as ke,_ as Ce,t as xe,p as Se}from"./pathToFile-C8mbCNB7.js";import{f as M,a as H}from"./format-date-prw4Jhrq.js";import{V as O}from"./VDatePicker-gMxh0u0o.js";import{m as Ie,V as G}from"./VSelectionControl-UDC2vv3o.js";const Pe={key:1,class:"relative rounded-lg"},Ue=["src"],Te=d("p",{class:"bg-gray-600 bg-opacity-75 border-2 border-gray-600 py-1 px-3 text-white hover:-translate-y-1 transition-all delay-150 cursor-pointer"}," انقر لتغيير الصورة ",-1),Fe=[Te],Be=J({__name:"AdImageUpload",props:{imagePath:{}},emits:["handleImage"],setup(e,{emit:C}){const l=e,c=C,n=y(null),s=y(!1),u=y(""),_=y(null),x=m=>{var V;s.value=!0;const v=(V=m.target.files)==null?void 0:V[0];v&&xe(v).then(g=>{s.value=!1,u.value=g,_.value=v,c("handleImage",_.value,"filled")})},b=()=>{n.value.click()};return K(()=>{l.imagePath&&(u.value=l.imagePath)}),(m,v)=>(T(),F("div",null,[d("input",{ref_key:"fileUpload",ref:n,class:"hidden",type:"file",accept:"image/*",onChange:x},null,544),!u.value&&!s.value?(T(),F("div",{key:0,class:"flex justify-center items-center bg-white rounded-lg h-64 border-2 border-slate-200 shadow-md hover:-translate-y-2 transition-all delay-100 cursor-pointer",onClick:b},[a(ke)])):D("",!0),u.value&&!s.value?(T(),F("div",Pe,[d("img",{class:"rounded-lg border-4 border-gray-200 w-full object-cover object-center shadow-md",src:u.value,alt:"uploaded image"},null,8,Ue),d("div",{class:"absolute top-0 left-0 h-full w-full flex justify-center items-center",onClick:b},Fe)])):D("",!0),a(Ce,{"is-loading":s.value,"custom-style":"animate-spin m-auto h-8 w-8 text-gray-400"},null,8,["is-loading"])]))}}),je=ee({indeterminate:Boolean,inset:Boolean,flat:Boolean,loading:{type:[Boolean,String],default:!1},...ae(),...Ie()},"VSwitch"),Ae=te()({name:"VSwitch",inheritAttrs:!1,props:je(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:indeterminate":e=>!0},setup(e,C){let{attrs:l,slots:c}=C;const n=$(e,"indeterminate"),s=$(e,"modelValue"),{loaderClasses:u}=le(e),{isFocused:_,focus:x,blur:b}=se(e),m=y(),v=B(()=>typeof e.loading=="string"&&e.loading!==""?e.loading:e.color),V=oe(),g=B(()=>e.id||`switch-${V}`);function p(){n.value&&(n.value=!1)}function S(f){var h,w;f.stopPropagation(),f.preventDefault(),(w=(h=m.value)==null?void 0:h.input)==null||w.click()}return ne(()=>{const[f,h]=ie(l),w=N.filterProps(e),o=G.filterProps(e);return a(N,L({class:["v-switch",{"v-switch--inset":e.inset},{"v-switch--indeterminate":n.value},u.value,e.class]},f,w,{modelValue:s.value,"onUpdate:modelValue":t=>s.value=t,id:g.value,focused:_.value,style:e.style}),{...c,default:t=>{let{id:i,messagesId:W,isDisabled:q,isReadonly:Q,isValid:X}=t;return a(G,L({ref:m},o,{modelValue:s.value,"onUpdate:modelValue":[I=>s.value=I,p],id:i.value,"aria-describedby":W.value,type:"checkbox","aria-checked":n.value?"mixed":void 0,disabled:q.value,readonly:Q.value,onFocus:x,onBlur:b},h),{...c,default:I=>{let{backgroundColorClasses:j,backgroundColorStyles:k}=I;return a("div",{class:["v-switch__track",...j.value],style:k.value,onClick:S},null)},input:I=>{let{inputNode:j,icon:k,backgroundColorClasses:Y,backgroundColorStyles:Z}=I;return a(re,null,[j,a("div",{class:["v-switch__thumb",{"v-switch__thumb--filled":k||e.loading},e.inset?void 0:Y.value],style:e.inset?void 0:Z.value},[a(de,null,{default:()=>[e.loading?a(ce,{name:"v-switch",active:!0,color:X.value===!1?void 0:v.value},{default:A=>c.loader?c.loader(A):a(me,{active:A.isActive,color:A.color,indeterminate:!0,size:"16",width:"2"},null)}):k&&a(ue,{key:k,icon:k,size:"x-small"},null)]})])])}})}})}),{}}}),De={class:"grid gap-x-8 gap-y-2 mt-6"},$e={class:"flex gap-14 mt-10"},Ne={class:"mt-4"},Le={class:"mt-8 lg:w-1/4"},ze={class:"mt-6"},Ge=J({__name:"AdsForm",props:{isLoading:{type:Boolean},ad:{}},emits:["submit"],setup(e,{emit:C}){const l=e,c=C,n=y("empty"),s=y(),u=B(()=>!!l.ad),_=B(()=>!v.value.valid||n.value=="empty"),x=ve(fe({name:ge().min(1,"يجب إدخال  إسم الإعلان "),show:pe([z(0),z(1)]),start_date:R(),end_date:R()})),{handleSubmit:b,errors:m,meta:v,setValues:V}=he({validationSchema:x,initialValues:{show:0}}),{value:g}=P("name"),{value:p}=P("show"),{value:S}=P("start_date"),{value:f}=P("end_date");K(()=>{l.ad&&(V({...l.ad,start_date:H(l.ad.start_date),end_date:H(l.ad.end_date)}),n.value=l.ad.url?"filled":"empty",Se(l.ad.url,l.ad.url.substring(l.ad.url.lastIndexOf("/")+1)).then(o=>{s.value=o}).catch(o=>{console.error(o)}))});const h=b(o=>{c("submit",{...o,url:s.value,start_date:M(o.start_date),end_date:M(o.end_date)})}),w=(o,t)=>{s.value=o,n.value=t};return(o,t)=>(T(),F("form",{onSubmit:t[4]||(t[4]=Ve((...i)=>r(h)&&r(h)(...i),["prevent"]))},[d("div",De,[a(ye,{modelValue:r(g),"onUpdate:modelValue":t[0]||(t[0]=i=>U(g)?g.value=i:null),class:"lg:w-1/2",label:"الإسم",variant:"outlined",color:"primary",placeholder:"الإسم","error-messages":r(m).name},null,8,["modelValue","error-messages"])]),d("div",$e,[a(O,{modelValue:r(S),"onUpdate:modelValue":t[1]||(t[1]=i=>U(S)?S.value=i:null),color:"primary",header:"تاريخ بداية الإعلان",border:!0,title:"","show-adjacent-months":""},null,8,["modelValue"]),a(O,{modelValue:r(f),"onUpdate:modelValue":t[2]||(t[2]=i=>U(f)?f.value=i:null),color:"primary",header:"تاريخ إنتهاء الإعلان",border:!0,title:"","show-adjacent-months":"",height:"550px"},null,8,["modelValue"])]),d("div",Ne,[a(Ae,{modelValue:r(p),"onUpdate:modelValue":t[3]||(t[3]=i=>U(p)?p.value=i:null),"true-value":1,inset:"","center-affix":!0,color:"primary",label:r(p)?"تعطيل":"تفعيل","error-messages":r(m).show},null,8,["modelValue","label","error-messages"]),d("p",null,E(r(p)?" الإعلان مفعل حالياً وسيظهر للمستخدمين":"الإعلان غير مفعل حاليا"),1)]),d("div",Le,[a(Be,{onHandleImage:w})]),d("div",ze,[a(be,{disabled:_.value,size:"large",variant:"elevated",color:"primary",type:"submit",loading:l.isLoading},{default:_e(()=>[we(E(u.value?"تعديل ":"حفظ"),1)]),_:1},8,["disabled","loading"])])],32))}});export{Ge as _};
