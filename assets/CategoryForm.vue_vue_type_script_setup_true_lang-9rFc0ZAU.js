import{d as C,b as y,G as h,N as U,O as j,P as i,R as k,S as _,w as D,c as E,a as l,i as r,g as s,T as f,U as b,j as L,V as M,W as O,o as R,f as z,t as G}from"./index-c8EmFYNS.js";import{_ as H}from"./ImageUpload.vue_vue_type_script_setup_true_lang-oT0zF6Ug.js";import{p as P}from"./pathToFile-C8mbCNB7.js";const W={class:"grid md:grid-cols-2 xl:grid-cols-3 gap-x-8 gap-y-2 mt-6"},$=l("h3",{class:"text-xl"}," قم بالضغط لرفع صورة ",-1),q={class:"mt-8 w-1/4"},A={class:"mt-6"},X=C({__name:"CategoryForm",props:{isLoading:{type:Boolean},category:{}},emits:["submit"],setup(V,{emit:x}){const e=V,S=x,n=y(null),m=y("empty"),d=h(()=>!!e.category),T=h(()=>!B.value.valid||m.value=="empty"),F=U(j({name:d.value?i():i().min(1,"يجب إدخال إسم التصنيف "),description:d.value?i():i().min(1,"يجب إدخال التفاصيل  ")})),{handleSubmit:w,errors:u,meta:B,setValues:I}=k({validationSchema:F}),{value:c}=_("name"),{value:p}=_("description");D(()=>{e.category&&(I({name:e.category.name,description:e.category.description}),m.value=e.category.image_path?"filled":"empty",P(e.category.image_path,e.category.image_path.substring(e.category.image_path.lastIndexOf("/")+1)).then(a=>{n.value=a}).catch(a=>{console.error(a)}))});const g=w(a=>{S("submit",{...a,image_path:n.value})}),N=(a,t)=>{n.value=a,m.value=t};return(a,t)=>{var v;return R(),E("form",{onSubmit:t[2]||(t[2]=O((...o)=>s(g)&&s(g)(...o),["prevent"]))},[l("div",W,[r(b,{modelValue:s(c),"onUpdate:modelValue":t[0]||(t[0]=o=>f(c)?c.value=o:null),label:"إسم التصنيف",variant:"outlined",color:"primary",placeholder:"إسم التصنيف","error-messages":s(u).name},null,8,["modelValue","error-messages"]),r(b,{modelValue:s(p),"onUpdate:modelValue":t[1]||(t[1]=o=>f(p)?p.value=o:null),label:"التفاصيل",type:"text",variant:"outlined",color:"primary",placeholder:"التفاصيل","error-messages":s(u).description},null,8,["modelValue","error-messages"])]),l("div",null,[$,l("div",q,[r(H,{"image-path":(v=e.category)==null?void 0:v.image_path,onHandleImage:N},null,8,["image-path"])])]),l("div",A,[r(M,{disabled:T.value,size:"large",variant:"elevated",color:"primary",type:"submit",loading:e.isLoading},{default:L(()=>[z(G(d.value?"تعديل":"إضافة"),1)]),_:1},8,["disabled","loading"])])],32)}}});export{X as _};
