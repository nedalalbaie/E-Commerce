import{d as S,G as B,N,O as U,P as m,R as q,S as i,w as E,c as F,a as l,i as r,g as e,T as d,U as c,j as M,V as Q,W as R,o as T,f as j,t as k,v as K,u as L,e as P,F as $,s as z}from"./index-c8EmFYNS.js";import{u as D}from"./useQuery-diit9zOu.js";import{a as G,e as O}from"./customers-service-sZoXl0Oz.js";import"./queryString-AL1HqB06.js";const W={class:"grid md:grid-cols-2 xl:grid-cols-3 gap-x-8 gap-y-2 mt-6"},A={class:"mt-3"},H=S({__name:"CustomerForm",props:{isLoading:{type:Boolean},customer:{}},emits:["submit"],setup(h,{emit:p}){const t=h,g=p,v=B(()=>!!t.customer),n=N(U({name:m().min(1,"يجب إدخال إسم الزبون "),phone_number:m().min(1,"يجب إدخال  رقم الهاتف "),email:m().min(1,"يجب إدخال الإيميل  "),address:m().min(1,"يجب إختيار العنوان")})),{handleSubmit:y,errors:s,meta:u,setValues:w}=q({validationSchema:n}),{value:b}=i("name"),{value:V}=i("phone_number"),{value:f}=i("email"),{value:_}=i("address");E(()=>{t.customer&&w({...t.customer})});const x=y(C=>{g("submit",C)});return(C,a)=>(T(),F("form",{onSubmit:a[4]||(a[4]=R((...o)=>e(x)&&e(x)(...o),["prevent"]))},[l("div",W,[r(c,{modelValue:e(b),"onUpdate:modelValue":a[0]||(a[0]=o=>d(b)?b.value=o:null),label:"إسم الزبون",variant:"outlined",color:"primary",placeholder:"إسم الزبون","error-messages":e(s).name},null,8,["modelValue","error-messages"]),r(c,{modelValue:e(V),"onUpdate:modelValue":a[1]||(a[1]=o=>d(V)?V.value=o:null),label:"رقم الهاتف",variant:"outlined",color:"primary",placeholder:"رقم الهاتف","error-messages":e(s).phone_number},null,8,["modelValue","error-messages"]),r(c,{modelValue:e(f),"onUpdate:modelValue":a[2]||(a[2]=o=>d(f)?f.value=o:null),label:"الإيميل",type:"number",variant:"outlined",color:"primary",placeholder:"الإيميل","error-messages":e(s).email},null,8,["modelValue","error-messages"]),r(c,{modelValue:e(_),"onUpdate:modelValue":a[3]||(a[3]=o=>d(_)?_.value=o:null),label:"العنوان",type:"text",variant:"outlined",color:"primary",placeholder:"العنوان","error-messages":e(s).address},null,8,["modelValue","error-messages"])]),l("div",A,[r(Q,{disabled:!e(u).valid,size:"large",variant:"elevated",color:"primary",type:"submit",loading:t.isLoading},{default:M(()=>[j(k(v.value?"تعديل زبون":"إضافة زبون"),1)]),_:1},8,["disabled","loading"])])],32))}}),I=l("h1",{class:"text-2xl font-medium bg-gray-100 w-fit p-2 rounded-md"},[l("span",null,"عبد الرحمن محمد - "),l("span",null," تعديل ")],-1),ee=S({__name:"EditCustomer",setup(h){const p=K(),t=Number(p.params.id),g=D({queryKey:["customer"],queryFn:()=>G(t)}),v=L(),n=P({mutationFn:({id:s,body:u})=>O(s,u),onSuccess:()=>{z.replace({name:"customers"}),v.invalidateQueries({queryKey:["customers"]})},onError:s=>{console.log(s)}}),y=s=>{n.mutate({body:s,id:t})};return(s,u)=>(T(),F($,null,[I,r(H,{"is-loading":e(n).isPending.value,customer:e(g).data.value,onSubmit:y},null,8,["is-loading","customer"])],64))}});export{ee as default};
